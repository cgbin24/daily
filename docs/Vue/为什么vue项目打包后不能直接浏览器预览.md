# 为什么vue项目打包后不能直接在浏览器中预览

> 使用vue构建的项目在本地开发完成后，需要编译打包为普通的`html+css+js`才能上线部署，但是现在的开发模式基本都是基于`ES6+`进行开发的，待将项目打包编译后js的文件引用类型都是`type='module'`，导致无法通过普通的双击`xxx.html` 的方式进行预览

### 解释

> 如果直接在浏览器中打开了 `index.html`，你会发现它抛出了一个错误，因为 `ES` 模块不能通过 `file://` 协议工作，也即是当你打开一个本地文件时浏览器使用的协议。

> 由于安全原因，`ES` 模块只能通过 `http://` 协议工作，也即是浏览器在打开网页时使用的协议。为了使 `ES` 模块在我们的本地机器上工作，我们需要使用本地的 `HTTP` 服务器，通过 `http://` 协议来提供 `index.html`。

> 要启动一个本地的 `HTTP` 服务器，请先安装 `Node.js`，然后通过命令行在 `HTML` 文件所在文件夹下运行 `npx serve`。你也可以使用其他任何可以基于正确的 `MIME` 类型服务静态文件的 `HTTP` 服务器。

### 解决

#### 方式1

```sh
# 1、确保已安装nodejs环境
# 当时用的npm>5.2.x，可直接使用命令预览
npx serve
# 否则，可在本地全局安装 serve，然后在启动
# https://www.npmjs.com/package/serve
npm i -g serve
serve
# or
serve -s 目录名
```

#### 方式2


### 小结

> 诸上所述，其实都是通过启动本地的`http`服务器实现的本地预览，其实究其根本就是使用ES模块开发的项目无法通过 `file://` 协议工作，只能是 `http` 协议，所以只要是基于正确的 `MIME` 类型服务静态文件的 `HTTP` 服务器都可以实现，通过该服务器启动一个服务来为打包后的内容提供预览支持


项目中其实都是通过相对路径来识别和引用文件

那么是否也可以通过将项目直接构建成